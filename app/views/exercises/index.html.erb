<%= turbo_frame_tag dom_id(@workout, :exercises)  do %>
  <div class="d-flex justify-content-between mt-3">
    <div class="d-flex align-items-center justify-space-between">
      <strong><h6>Your Exercises:</h6></strong>
    </div>
    <%= link_to 'Hide exercises', workout_program_path(@workout.workout_program), data: { turbo_frame: :_top }, class:"text-decoration-none text-white mb-2" %>
  </div>
  <div class="exercises-div">
    <table id="table">
      <tr>
        <th>
          <strong><h6>Name</h6></strong>
        </th>
        <th>
          <strong><h6>Sets</h6></strong>
        </th>
        <th>
          <strong><h6>Reps</h6></strong>
        </th>
        <th>
          <strong><h6>Weights</h6></strong>
        </th>
      </tr>
      <% if @exercises.any? %>
        <% @exercises.each do |exercise|  %>
          <%= turbo_frame_tag dom_id(exercise) do %>
            <tr>
              <td class="d-flex align-items-center">
                <%= link_to remove_association_path(exercise.id), data: {turbo_method: :patch, turbo_frame: :_top} do %>
                  <i class="fa-solid fa-trash fa-lg" style="color: $app-color;"></i>
                <% end %>
                <p class="ms-2"><%= exercise.name %></p>
              </td>
              <td data-controller="set-sets" class="text-center">
                <!-- Button trigger modal -->
                <button type="button" class="bg-transparent" data-bs-toggle="modal" data-bs-target="#setsModal<%= exercise.id %>">
                  <p data-set-sets-target="sets"><%= exercise.sets %></p>
                </button>

                <!-- Modal -->
                <div class="modal fade" id="setsModal<%= exercise.id %>" tabindex="-1" aria-labelledby="setsModalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="setsModalLabel">Sets</h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">X</button>
                      </div>
                      <div class="modal-body">
                          <p>Change Exercise Sets:</p>
                        <div class="edit-exercise">
                          <button type="button" class="links" data-action="click->set-sets#decrease">-</button>
                          <p data-set-sets-target="set"><%= exercise.sets %></p>
                          <button type="button" class="links" data-action="click->set-sets#increase">+</button>
                        </div>
                      </div>
                      <%= simple_form_for exercise, html: {data:{set_sets_target:"form"}, class:"d-none"} do |f| %>
                        <%= f.input :sets, input_html: {data: {set_sets_target: "input"}} %>
                        <%= f.submit %>
                      <% end %>
                    </div>
                  </div>
                </div>
              </td>
              <td data-controller="set-reps" class="text-center">
                <!-- Button trigger modal -->
                <button type="button" class="bg-transparent" data-bs-toggle="modal" data-bs-target="#repsModal<%= exercise.id %>">
                  <p data-set-reps-target="reps"><%= exercise.reps %></p>
                </button>

                <!-- Modal -->
                <div class="modal fade" id="repsModal<%= exercise.id %>" tabindex="-1" aria-labelledby="repsModalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="repsModalLabel">Reps</h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">X</button>
                      </div>
                      <div class="modal-body">
                          <p>Change Exercise Reps:</p>
                        <div class="edit-exercise">
                          <button type="button" class="links" data-action="click->set-reps#decrease">-</button>
                          <p data-set-reps-target="rep"><%= exercise.reps %></p>
                          <button type="button" class="links" data-action="click->set-reps#increase">+</button>
                        </div>
                      </div>
                      <%= simple_form_for exercise, html: {data:{set_reps_target:"form"}, class:"d-none"} do |f| %>
                        <%= f.input :reps, input_html: {data: {set_reps_target: "input"}} %>
                        <%= f.submit %>
                      <% end %>
                    </div>
                  </div>
                </div>
              </td>
              <td data-controller="set-weight" class="text-center">
                <!-- Button trigger modal -->
                <button type="button" class="bg-transparent" data-bs-toggle="modal" data-bs-target="#weightModal<%= exercise.id %>">
                  <p data-set-weight-target="weights"><%= exercise.weight %></p>
                </button>

                <!-- Modal -->
                <div class="modal fade" id="weightModal<%= exercise.id %>" tabindex="-1" aria-labelledby="weightModalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="weightModalLabel">Weights</h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">X</button>
                      </div>
                      <div class="modal-body">
                          <p>Change Exercise Weight:</p>
                        <div class="modal-footer-weight d-flex justify-content-center">
                          <%= simple_form_for exercise,html: {data:{set_weight_target:"form", action:"set-weight#update"}, class:""} do |f| %>
                            <%= f.input :weight,label_html:{class:"d-none"}, input_html: {data: {set_weight_target: "input"}, class:"input-field"} %>
                            <%= f.button :submit, class:"button-green-modal", data:{bs_dismiss: "modal"}%>
                          <% end %>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </td>
            </tr>
          <% end %>
        <% end %>
      <% else %>
        <p>No exercises yet...</p>
      <% end %>
    </table>
  </div>
  <div class="d-flex justify-content-between text-center mt-3">
    <strong><p>Create Exercise</p></strong>
    <%= link_to new_workout_exercise_path(@workout) do %>
      <i class="fa-solid fa-circle-plus fa-2xl text-center"></i>
    <% end %>
    <strong><p>Add Exercise</p></strong>
      <%= link_to add_exercise_path(@workout), data: { turbo_frame: :_top } do %> <!-- Link when clickled says content missing - Ticket with George -->
      <i class="fa-solid fa-circle-plus fa-2xl text-center"></i>
    <% end %>
  </div>
<% end %>
